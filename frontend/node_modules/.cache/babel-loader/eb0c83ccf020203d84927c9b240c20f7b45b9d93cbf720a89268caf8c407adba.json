{"ast":null,"code":"var _jsxFileName = \"/home/matthieu/server-web/02-10-2024/forum_app/frontend/src/pages/ForumTopic.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport '../css/ForumTopic.css'; // CSS pour styliser la page\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000'); // Connexion à Socket.IO\n\nfunction ForumTopic() {\n  _s();\n  const [topics, setTopics] = useState([]);\n  const [newTopic, setNewTopic] = useState({\n    title: '',\n    description: ''\n  });\n  useEffect(() => {\n    // Récupérer les topics existants au chargement\n    fetch('http://localhost:5000/api/topics').then(response => response.json()).then(data => setTopics(data));\n\n    // Écouter les nouveaux topics via Socket.IO\n    socket.on('newTopic', topic => {\n      setTopics(prevTopics => [topic, ...prevTopics]);\n    });\n\n    // Nettoyer les événements Socket.IO à la déconnexion\n    return () => {\n      socket.off('newTopic');\n    };\n  }, []);\n  const handleSubmit = e => {\n    e.preventDefault();\n    fetch('http://localhost:5000/api/topics', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify(newTopic)\n    }).then(response => response.json()).then(data => {\n      // Réinitialiser le formulaire après création du topic\n      setNewTopic({\n        title: '',\n        description: ''\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"forum-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Topics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"new-topic-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Title\",\n        value: newTopic.title,\n        onChange: e => setNewTopic({\n          ...newTopic,\n          title: e.target.value\n        }),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Description\",\n        value: newTopic.description,\n        onChange: e => setNewTopic({\n          ...newTopic,\n          description: e.target.value\n        }),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Post Topic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"topics-list\",\n      children: topics.map(topic => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: topic.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: topic.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this)]\n      }, topic.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(ForumTopic, \"eeHmVBDCIBRFbpz2G42zO6367nA=\");\n_c = ForumTopic;\nexport default ForumTopic;\nvar _c;\n$RefreshReg$(_c, \"ForumTopic\");","map":{"version":3,"names":["React","useState","useEffect","io","jsxDEV","_jsxDEV","socket","ForumTopic","_s","topics","setTopics","newTopic","setNewTopic","title","description","fetch","then","response","json","data","on","topic","prevTopics","off","handleSubmit","e","preventDefault","method","headers","localStorage","getItem","body","JSON","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","map","id","_c","$RefreshReg$"],"sources":["/home/matthieu/server-web/02-10-2024/forum_app/frontend/src/pages/ForumTopic.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport '../css/ForumTopic.css';  // CSS pour styliser la page\n\nconst socket = io('http://localhost:5000');  // Connexion à Socket.IO\n\nfunction ForumTopic() {\n    const [topics, setTopics] = useState([]);\n    const [newTopic, setNewTopic] = useState({\n        title: '',\n        description: ''\n    });\n\n    useEffect(() => {\n        // Récupérer les topics existants au chargement\n        fetch('http://localhost:5000/api/topics')\n            .then((response) => response.json())\n            .then((data) => setTopics(data));\n\n        // Écouter les nouveaux topics via Socket.IO\n        socket.on('newTopic', (topic) => {\n            setTopics((prevTopics) => [topic, ...prevTopics]);\n        });\n\n        // Nettoyer les événements Socket.IO à la déconnexion\n        return () => {\n            socket.off('newTopic');\n        };\n    }, []);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        fetch('http://localhost:5000/api/topics', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\n            },\n            body: JSON.stringify(newTopic)\n        })\n        .then((response) => response.json())\n        .then((data) => {\n            // Réinitialiser le formulaire après création du topic\n            setNewTopic({ title: '', description: '' });\n        });\n    };\n\n    return (\n        <div className=\"forum-page\">\n            <h2>Topics</h2>\n\n            <form onSubmit={handleSubmit} className=\"new-topic-form\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Title\"\n                    value={newTopic.title}\n                    onChange={(e) => setNewTopic({ ...newTopic, title: e.target.value })}\n                    required\n                />\n                <textarea\n                    placeholder=\"Description\"\n                    value={newTopic.description}\n                    onChange={(e) => setNewTopic({ ...newTopic, description: e.target.value })}\n                    required\n                />\n                <button type=\"submit\">Post Topic</button>\n            </form>\n\n            <ul className=\"topics-list\">\n                {topics.map((topic) => (\n                    <li key={topic.id}>\n                        <h3>{topic.title}</h3>\n                        <p>{topic.description}</p>\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default ForumTopic;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}